## Отчет по лабораторной работе № 3

#### № группы: `ПМ-2401`

#### Выполнилa: `Петрова Кира Денисовна`

#### Вариант: `19`

### Cодержание:

- [Постановка задачи](#1-постановка-задачи)
- [Входные и выходные данные](#2-входные-и-выходные-данные)
- [Выбор структуры данных](#3-выбор-структуры-данных)
- [Алгоритм](#4-алгоритм)
- [Программа](#5-программа)
- [Анализ правильности решения](#6-анализ-правильности-решения)

### 1. Постановка задачи

> Разработать программу для управления посадкой гостей за столы в ресторане. Реализовать функции размещения одиночных гостей и компаний с учётом фиксированной
вместимости столов, освобождения столов и оптимизации распределения мест.
> 
>Описание функционала
>1. Создание ресторана
   Создаёт ресторан с массивом столов, где каждому столу соответствует вместимость из переданного массива. Если вместимость меньше 1, она устанавливается
   равной 1.
>2. Посадка одного человека за указанный стол
   Ставит одного человека за стол с указанным номером, если стол свободен.
>3. Посадка компании за указанный стол
   Размещает компанию из k человек за указанный стол, если это возможно (вместимость стола больше или равна числу человек, и стол свободен).
>4. Посадка компании за первый подходящий стол
   Находит первый свободный стол, где достаточно мест для компании из k человек,
   и размещает их.
>5. Посадка компании за самый выгодный стол
   Размещает компанию из k человек за первый свободный стол, где остаётся минимальное количество лишних мест. Если такой стол не найден, размещение не
   выполняется.
>6. Освобождение стола
   Освобождает стол с указанным номером, делая его доступным для новых гостей.
>7. Посадка компании за несколько соседних столов
   Размещает компанию, которой требуется больше мест, чем может предоставить
   один стол. Компания занимает первую подходящую последовательность соседних
   столов. Если места недостаточно, размещение не выполняется.
>8. Посадка компании за самую выгодную последовательность столов
   Размещает компанию за первую последовательность соседних столов с минимальным количеством лишних мест. Проверяются все возможные комбинации, начиная
   с каждого стола. Если размещение невозможно, действие не выполняется.

Данную задачу можно разделить на 8 подзадач:

1. Создание ресторана
   Создаёт ресторан с массивом столов, где каждому столу соответствует вмести-
   мость из переданного массива. Если вместимость меньше 1, она устанавливается
   равной 1.
2. Посадка одного человека за указанный стол
   Ставит одного человека за стол с указанным номером, если стол свободен.
3. Посадка компании за указанный стол
   Размещает компанию из k человек за указанный стол, если это возможно (вме-
   стимость стола больше или равна числу человек, и стол свободен).
4. Посадка компании за первый подходящий стол
   Находит первый свободный стол, где достаточно мест для компании из k человек,
   и размещает их.
5. Посадка компании за самый выгодный стол
   Размещает компанию из k человек за первый свободный стол, где остаётся ми-
   нимальное количество лишних мест. Если такой стол не найден, размещение не
   выполняется.
6. Освобождение стола
   Освобождает стол с указанным номером, делая его доступным для новых гостей.
7. Посадка компании за несколько соседних столов
   Размещает компанию, которой требуется больше мест, чем может предоставить
   один стол. Компания занимает первую подходящую последовательность соседних
   столов. Если места недостаточно, размещение не выполняется.
8. Посадка компании за самую выгодную последовательность столов
   Размещает компанию за первую последовательность соседних столов с минималь-
   ным количеством лишних мест. Проверяются все возможные комбинации, начиная
   с каждого стола. Если размещение невозможно, действие не выполняется.

### 2. Входные и выходные данные

#### Данные на вход

На вход программа должна получить 1 число (N), длину массива, при этом мы понимаем, что оно должно быть натуральным, чтобы массив можно было задать. Также нужно ввести N чисел для заполнения массива, при этом из условия мы понимаем, что они относятся к множеству целых чисел (тк в реальной жизни вместимость не может быть задана не целым числом, допустим вместимость: 1.5 человека). Значит минимальное значение для 1 переменной = 1, минимальное значение для элементов массива не дано, максимальное значение не дано для всех переменных. Но мы можем взять за максимальное число, например 10^8 степени, т.к. можно предположить, что при использования программы реальным рестораном превышение лимита не произойдет. Минимальные значения вместимостей столов можно сделать, например -10*8, тк все равно они будут заменениы нв 1 по условию, но мало ли при вводе данных произойдет ошибка и человек случайно введет число с минусом.

|                   | Тип                         | min значение | max значение   |
|-------------------|-----------------------------|--------------|----------------|
| N (Число 1)       | Целое неотрицательное число | 1            | 10^8           |
| Число 2           | Целое неотрицательное число | -10^8        | 10^8           |
| ...                                                                             |
| Последнее число   | Целое неотрицательное число | -10^8        | 10^8           |

#### Данные на выход

Данных на выход никаких нет, тк целью программы разработать методы, которые не предполагают вывода данных на экран
Но вывод все же будет, но не данных, а строк, которые лишь для удобства пользователя показывают была ли совершена та или иная посадка гостей, или, например, такая посадка не возможна

### 3. Выбор структуры данных

Программа получает 1 натуральное число (N) и еще N целых чисел. Поэтому для их хранения
можно выделить 1 переменную (`N`) типа `int`, 2 переменную `stoly` типа `int[]`, и 3 переменную `restaurant` 
типа Restourant.

|              | название переменной   | Тип (в Java) | 
|--------------|-----------------------|--------------|
| 1 переменная | `N`                   | `int`        |
| 2 переменная | `stoly`               | `int[]`      |
| 3 переменная | `restaurant`          | `Restourant` |

Также нам понадобится переменные типа Stol для использования ее в классе Restourant. 
Также будут использоваться переменные примитивных типов данных, входящие в функционал методов.

### 4. Алгоритм

#### Алгоритм выполнения программы. Описание классов программы:

1. **Класс Stol:**  
   Данный класс нужен для хранения характеристик каждого стола. У стола есть вместимость, характеристика занятости (свободен/занят) и номер. 
Класс состоит из конструктора, геттеров и двух методов, которые помечают занят стол или свободен. Используется данный класс для написания класса Restourant.

2. **Класс Restourant:**
   Данный класс нужен для описания методов, которые и будут функционалом ресторана. Полем класса является массив столов. Класс состоит из конструктора, и 7 методов.
- Метод для посадки одного гостя за стол с номером
- Метод для посадки компании из k человек за стол с номером
- Метод для посадки компании за первый подходящий стол с вместимостью не меньше k человек
- Метод для посадки компании за самый выгодный стол
- Метод для освобождения стола с номером
- Метод для посадки компании за несколько соседних столов с суммарной вместимостью >= k человек
- Метод для посадки компании за несколько соседних столов с суммарной вместимостью >= k человек, минимальными лишними местами





### 5. Программа

```java
import java.io.PrintStream;
import java.util.Scanner;

class Stol{
   int vmestimost;
   boolean notfree;
   int nomerStola;

   public Stol(int vmestimost, int nomerStola){ // Конструктор для инициализации стола
      if(vmestimost<1){ // Проверяем, если вместимость меньше 1, устанавливаем минимальную вместимость = 1
         this.vmestimost=1; // Устанавливаем минимальную вместимость
         this.notfree=true; // Стол занят по умолчанию (вместимость 1)
         this.nomerStola=nomerStola; // Номер стола
      }
      else{
         this.vmestimost=vmestimost; // Устанавливаем указанную вместимость
         this.notfree=false; // Стол свободен
         this.nomerStola=nomerStola; // Номер стола
      }
   }

   public int getVmestimost(){
      return vmestimost; // Возвращаем вместимость стола
   }

   public boolean getNotfree(){
      return notfree;  // Возвращаем, занят ли стол
   }

   public void zanat() {
      this.notfree = true;  // Помечаем стол как занятый
   }

   public void nezanat() {
      this.notfree = false; // Помечаем стол как свободный
   }
}



class Restourant{
   Stol [] stoli;

   public Restourant(int[] a){  // Конструктор ресторана для создания массива столов
      stoli = new Stol[a.length]; // Инициализируем массив столов
      for(int i=0;i<a.length;i++){
         stoli[i]=new Stol(a[i],i+1);  // Создаем каждый стол с вместимостью и номером
      }
   }

   public void seatOne(int num){ // Метод для посадки одного гостя за стол с номером num
      if(num<=0 || stoli.length<num || stoli[num-1].getNotfree()){
         System.out.println("Не удалось посадить гостя за стол " + num + ". Стол занят или номер вне диапазона.");; // Стол занят или номер стола вне диапазона
      }
      else{
         stoli[num-1].zanat();// Сажаем одного гостя за стол
         System.out.println("Гость успешно посажен за стол " + num + ".");
      }
   }

   public void seatCompany(int num, int k){ // Метод для посадки компании из k человек за стол с номером num
      if(num<=0 || stoli.length<num || stoli[num-1].getNotfree() || stoli[num-1].getVmestimost()<k){
         System.out.println("Не удалось посадить компанию за стол " + num + ". Стол занят или вместимость недостаточна."); // Стол занят или номер стола вне диапазона
      }
      else{
         stoli[num-1].zanat();// Сажаем одного гостя за стол
         System.out.println("Компания из " + k + " человек успешно посажена за стол " + num + ".");
      }
   }

   public void seatCompanyFirstStol(int k) {  // Метод для посадки компании за первый подходящий стол с вместимостью не меньше k (тк k человек)
      int a=0; // Флаг
      for (int i = 0; i < stoli.length; i++) {
         if (! stoli[i].getNotfree() && stoli[i].getVmestimost() >= k) {
            stoli[i].zanat(); // Сажаем компанию за первый подходящий стол
            System.out.println("Компания из " + k + " человек успешно посажена за первый подходящий стол " + (i + 1) + ".");
            a++;
            break;
         }
      }
      if (a==0) {
         System.out.println("Не удалось найти подходящий стол для компании.");
      }
   }

   public void seatCompanyVigodniyStol(int k) { // Метод для посадки компании за самый выгодный стол (с минимальными лишними местами)
      int DopMesta=0; // Лишние места
      int Index=0; // Индекс подходящего стола
      int w=0;  // Флаг, указывающий, был ли найден подходящий стол
      for (int i = 0; i < stoli.length; i++) {
         if(! stoli[i].getNotfree() && stoli[i].getVmestimost() >= k && w==0){
            DopMesta=stoli[i].vmestimost-k; // Подсчитываем лишние места
            Index=i; // Запоминаем индекс первого стола
            w++; // Устанавливаем флаг
         }
         else{
            if(! stoli[i].getNotfree() && stoli[i].getVmestimost() >= k && DopMesta>(stoli[i].vmestimost - k)){
               DopMesta=stoli[i].vmestimost-k; // Обновляем лишние места
               Index=i; // Обновляем индекс стола
            }
         }
      }

      if(w==0){
         System.out.println("Не удалось найти подходящий стол с минимальными лишними местами для компании из " + k + " человек.");
      }
      else{
         stoli[Index].zanat(); // Сажаем компанию за найденный стол
         System.out.println("Компания из " + k + " человек успешно посажена за стол с номером " + (Index + 1) + ". Лишние места: " + DopMesta);
      }
   }

   public void osvobozhdenieStola(int num) { // Метод для освобождения стола с номером num
      if (stoli.length > num - 1 && num > 0) {
         stoli[num - 1].notfree = false;  // Помечаем стол как свободный
         System.out.println("Стол " + num + " успешно освобожден.");
      } else {
         System.out.println("Не удалось освободить стол " + num + ". Стол с таким номером не существует."); // Стол с таким номером не существует или передано некорректное значение
      }
   }

   public boolean seatCompanyNaNeskolkoStolov(int k) { // Метод для посадки компании за несколько соседних столов с суммарной вместимостью >= k
      int sum=0; // Сумма вместимости соседних столов
      int start=-1; // Старту присваиваем несуществующее значение

      for (int i = 0; i < stoli.length; i++) {
         if (! stoli[i].getNotfree()) { // Если стол свободен
            if (start == -1) {
               start = i; // Запоминаем индекс первого стола
               sum = stoli[i].getVmestimost(); // Добавляем вместимость стола
            } else {
               sum += stoli[i].getVmestimost(); // Добавляем вместимость следующего стола
            }


            if (sum >= k) { // Если нашли подходящую последовательность столов
               for (int j = start; j <= i; j++) {
                  stoli[j].zanat(); // Помечаем все столы в последовательности как занятые
               }
               System.out.println("Компания из " + k + " человек успешно посажена за несколько столов.");
               return true; // Разместили компанию. Конец!
            }
         } else { // Стол занят, следовательно, начинаем поиск заново
            start=-1; // Присваиваем переменной исходное значение
            sum=0; // Обнуляем сумматор
         }
      }

      System.out.println("Не удалось посадить компанию за несколько столов.");
      return false; // Подходящая последовательность не найдена. Метод не применился.
   }

   public boolean seatCompanyVigodniyNeskolkoStolov(int k) { // Метод для посадки компании за несколько соседних столов с суммарной вместимостью >= k, минимальными лишними местами
      int start = -1; // Начало самой выгодной последовательности
      int end = -1;   // Конец самой выгодной последовательности
      int mDopMesta = 0; // Минимальное количество лишних мест
      int a = 0; // Флаг: найдена ли хоть одна подходящая последовательность


      // Перебираем все возможные начальные столы
      for (int i = 0; i < stoli.length; i++) {
         int sum = 0; // Сумма вместимости текущей последовательности

         // Проверяем непрерывную последовательность начиная с i
         for (int j = i; j < stoli.length; j++) {
            if (stoli[j].getNotfree()) {
               // Если встречаем занятый стол, текущая последовательность прерывается
               break; // Переходим к следующему начальному столу
            }

            sum += stoli[j].getVmestimost(); // Добавляем вместимость текущего стола

            if (sum >= k) { // Если текущая сумма вместимости достаточна
               int DopMesta = sum - k; // Подсчитываем лишние места

               if (a == 0 || DopMesta < mDopMesta) { // Если это первая подходящая последовательность или она выгоднее предыдущей
                  a++;
                  mDopMesta = DopMesta;
                  start = i; // Обновляем начало
                  end = j; // Обновляем конец
               }

               break; // Ищем новый стартовый стол
            }
         }
      }

      if (a == 0) {
         System.out.println("Не удалось найти подходящую последовательность столов с минимальными лишними местами.");
         return false; // Метод не применяется, если подходящей последовательности не найдено. Конец.
      }

      for (int i = start; i <= end; i++) { // Помечаем все столы в найденной самой выгодной последовательности как занятые
         stoli[i].zanat();
      }
      System.out.println("Компания из " + k + " человек успешно посажена за несколько столов с минимальными лишними местами.");
      return true; // Метод применился. Конец.
   }

}


public class laba3 {
   public static Scanner in = new Scanner(System.in);
   public static PrintStream out = System.out;

   public static void main(String[] args) {

      out.print("Введите количество столов: "); // Ввод количества столов
      int n = in.nextInt();


      int[] stoly = new int[n];
      out.println("Введите вместимость каждого стола:");
      for (int i = 0; i < n; i++) {
         stoly[i] = in.nextInt();
      }

      // Создание объекта ресторана
      Restourant restaurant = new Restourant(stoly);

      out.println();







      // Пример использования методов

      // Метод посадки одного гостя за стол с номером 1
      System.out.println("              Пример посадки одного гостя ");
      restaurant.seatOne(1);  // Попытка посадить гостя за стол 1
      restaurant.seatOne(100); // Попытка посадить гостя за несуществующий стол

      // Метод посадки компании из 3 человек за стол 2
      System.out.println("              Пример посадки компании ");
      restaurant.seatCompany(2, 3);  // Попытка посадить компанию из 3 человек за стол 2
      restaurant.seatCompany(1, 100);  // Попытка посадить компанию из 100 человек за стол 1

      // Метод посадки компании за первый подходящий стол с вместимостью >= k
      System.out.println("              Пример посадки компании за первый подходящий стол ");
      restaurant.seatCompanyFirstStol(4); // Попытка посадить компанию из 4 человек за первый подходящий стол
      restaurant.seatCompanyFirstStol(100); // Попытка посадить компанию из 100 человек

      // Метод посадки компании за самый выгодный стол (с минимальными лишними местами)
      System.out.println("              Пример посадки компании за самый выгодный стол ");
      restaurant.seatCompanyVigodniyStol(5); // Попытка посадить компанию из 5 человек за самый выгодный стол
      restaurant.seatCompanyVigodniyStol(100); // Попытка посадить компанию из 100 человек

      // Метод освобождения стола
      System.out.println("              Пример освобождения стола ");
      restaurant.osvobozhdenieStola(1);  // Освободить стол 1
      restaurant.osvobozhdenieStola(20); // Попытка освободить несуществующий стол

      // Метод посадки компании за несколько соседних столов
      System.out.println("              Пример посадки компании за несколько столов ");
      restaurant.seatCompanyNaNeskolkoStolov(7);  // Попытка посадить компанию за несколько столов
      restaurant.seatCompanyNaNeskolkoStolov(200); // Попытка посадить компанию за несколько столов

      // Метод посадки компании за несколько столов с минимальными лишними местами
      System.out.println("              Пример посадки компании за несколько столов с минимальными лишними местами ");
      restaurant.seatCompanyVigodniyNeskolkoStolov(7);  // Попытка посадить компанию за несколько столов с минимальными лишними местами
      restaurant.seatCompanyVigodniyNeskolkoStolov(200); // Попытка посадить компанию за несколько столов с минимальными лишними местами
   }
}
```

### 6. Анализ правильности решения

Программа работает корректно. Покажем это на нескольких различных примерах. Создадим несколько разных по количеству столов и их вместимости ресторанов и применим к ним все методы.

1. Тест при `N`==5 и столами, вместимостью: 3, 1, 6, -3, 5
    - **Input**:
        ```
        5
        3 1 6 -3 5
        ```

    - **Output**:
        ```
                    Пример посадки одного гостя 
      Гость успешно посажен за стол 1.
      Не удалось посадить гостя за стол 100. Стол занят или номер вне диапазона.
                    Пример посадки компании
      Компания из 3 человек успешно посажена за стол 2.
      Не удалось посадить компанию за стол 1. Стол занят или вместимость недостаточна.
                    Пример посадки компании за первый подходящий стол
      Компания из 4 человек успешно посажена за первый подходящий стол 4.
      Не удалось найти подходящий стол для компании.
                    Пример посадки компании за самый выгодный стол
      Не удалось найти подходящий стол с минимальными лишними местами для компании из 5 человек.
      Не удалось найти подходящий стол с минимальными лишними местами для компании из 100 человек.
                    Пример освобождения стола
      Стол 1 успешно освобожден.
      Не удалось освободить стол 20. Стол с таким номером не существует.
                    Пример посадки компании за несколько столов
      Не удалось посадить компанию за несколько столов.
      Не удалось посадить компанию за несколько столов.
                    Пример посадки компании за несколько столов с минимальными лишними местами
      Не удалось найти подходящую последовательность столов с минимальными лишними местами.
      Не удалось найти подходящую последовательность столов с минимальными лишними местами.
        ```

2. Тест при `N`==10 и столами, вместимостью: 7, 8, 10, 10, 5, 2, 4, 4, 5, 1

    - **Input**:
        ```
        10
        7 8 10 10 5 2 4 4 5 1
        ```

    - **Output**:
        ```
                      Пример посадки одного гостя 
        Гость успешно посажен за стол 1.
        Не удалось посадить гостя за стол 100. Стол занят или номер вне диапазона.
                      Пример посадки компании
        Компания из 3 человек успешно посажена за стол 2.
        Не удалось посадить компанию за стол 1. Стол занят или вместимость недостаточна.
                      Пример посадки компании за первый подходящий стол
        Компания из 4 человек успешно посажена за первый подходящий стол 3.
        Не удалось найти подходящий стол для компании.
                      Пример посадки компании за самый выгодный стол
        Компания из 5 человек успешно посажена за стол с номером 5. Лишние места: 0
        Не удалось найти подходящий стол с минимальными лишними местами для компании из 100 человек.
                      Пример освобождения стола
        Стол 1 успешно освобожден.
        Не удалось освободить стол 20. Стол с таким номером не существует.
                      Пример посадки компании за несколько столов
        Компания из 7 человек успешно посажена за несколько столов.
        Не удалось посадить компанию за несколько столов.
                      Пример посадки компании за несколько столов с минимальными лишними местами
        Компания из 7 человек успешно посажена за несколько столов с минимальными лишними местами.
        Не удалось найти подходящую последовательность столов с минимальными лишними местами.
        ```

3. Тест при `N`==20 и столами, вместимостью: 7, 8, 10, 10, 5, 2, 4, 4, 5, 1, 10, 3, 3, 4, 2, 1, 5, 6, 9, 7

    - **Input**:
        ```
        20
        1 -1 30 30 50 2 -4 4 5 1 10 3 3 4 2 1 5 6 9 7
        ```

    - **Output**:
        ```
                      Пример посадки одного гостя 
        Гость успешно посажен за стол 1.
        Не удалось посадить гостя за стол 100. Стол занят или номер вне диапазона.
                      Пример посадки компании
        Не удалось посадить компанию за стол 2. Стол занят или вместимость недостаточна.
        Не удалось посадить компанию за стол 1. Стол занят или вместимость недостаточна.
                      Пример посадки компании за первый подходящий стол
        Компания из 4 человек успешно посажена за первый подходящий стол 3.
        Не удалось найти подходящий стол для компании.
                      Пример посадки компании за самый выгодный стол
        Компания из 5 человек успешно посажена за стол с номером 9. Лишние места: 0
        Не удалось найти подходящий стол с минимальными лишними местами для компании из 100 человек.
                      Пример освобождения стола
        Стол 1 успешно освобожден.
        Стол 20 успешно освобожден.
                      Пример посадки компании за несколько столов
        Компания из 7 человек успешно посажена за несколько столов.
        Не удалось посадить компанию за несколько столов.
                      Пример посадки компании за несколько столов с минимальными лишними местами
        Компания из 7 человек успешно посажена за несколько столов с минимальными лишними местами.
        Не удалось найти подходящую последовательность столов с минимальными лишними местами.
        ```